import{f as z,u as W,a as X,g as Y,r as ee,d as T,o as te,c as ae,b as ne,_ as le}from"./index.c622b150.js";/* empty css                    *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                         */import{_ as oe}from"./setting.136ae06d.js";import{d as N,P as a,aA as se,aB as ue,aC as re,aD as de,aE as ce,r as ie,b as B,aF as pe,aG as fe,aH as _e,aI as me,aJ as ve,aK as be,a4 as he,a5 as ge,aL as Oe,C as Ae,aM as ye,aN as Ee,A as m,B as g,R as u,u as E,J as S,a3 as V,a2 as D,Q as C,S as I,Z as R,a9 as ke,aO as xe,aP as we,aQ as Be,n as F}from"./element-plus.dee36745.js";import{g as k,s as x}from"./storage.12aabd04.js";import"./el-tooltip.89296c46.js";import"./mockjs.f3824721.js";function Ce(p){return typeof p=="function"||Object.prototype.toString.call(p)==="[object Object]"&&!re(p)}const Me=N({props:{menuOption:{type:Object,default:{defaultOpeneds:["1"],defaultActive:"1-1",menu:[]}}},emits:["goMenu"],setup(p,{emit:A}){const w=(o,b)=>{A("goMenu",o,b)},d=(o,b)=>{if(b?.length)return b.map(t=>t.children?a(de,{key:t.sortId,index:t.sortId},{default:()=>[d(t,t.children)],title:()=>a("span",null,[t.title])}):a(ce,{index:t.sortId,onClick:()=>w(o,t)},{default:()=>[t.title]}))};return()=>{let o;return a(ue,{width:"200px"},{default:()=>[a(se,{"unique-opened":!0,"default-openeds":p.menuOption.defaultOpeneds,"default-active":p.menuOption.defaultActive},Ce(o=d(void 0,p.menuOption.menu))?o:{default:()=>[o]})]})}}}),Te={class:"color-gray3"},Se={class:"home-toolbar color-gray3"},Ve=N({__name:"index",setup(p){const A=z(),w=W(),d=X(),o=Y();A.keepAliveAction(ee);const{keepAliveInclude:b}=T(A),t=ie({defaultOpeneds:["1"],defaultActive:"1-1",menu:[]}),{userinfo:P}=T(w),l=B([]),O=B(o.path),c=B([]);te(n=>{if(typeof n?.meta?.title=="string"&&!l.value.includes(n?.meta?.title))l.value.push(n.meta.title),x("breadcrumb",l.value),x("menuOption",{defaultOpeneds:t.defaultOpeneds,defaultActive:t.defaultActive});else{const e=l.value.findIndex(f=>f===n?.meta?.title),s=k("breadcrumb");e>-1&&(l.value=s?.slice(0,e+1),e!==s?.length-1&&x("breadcrumb",l.value))}});const j=({index:n})=>{if(!n)return;const e=c.value[~~n];!e||(O.value=e.path,t.defaultOpeneds=e.defaultOpeneds,t.defaultActive=e.defaultActive,l.value=e.breadcrumb,d.push({path:e.path}))},G=n=>{c.value=c.value.filter(s=>s.path!==n);const e=c.value.length;if(e){const s=c.value[e-1];O.value=s.path,l.value=s.breadcrumb,t.defaultOpeneds=s.defaultOpeneds,t.defaultActive=s.defaultActive,d.back()}else t.defaultOpeneds=["1"],t.defaultActive="1-1",l.value=["Dashboard","\u5206\u6790\u9875"],d.push({path:"/dashboard/analysis"})},H=(n,e,s)=>{if(o.name){let f=!1;(function v(_,h,y){_.some(r=>{if(r.name===o.name)return F(()=>{t.defaultOpeneds=[`${h||r.sortId}`],t.defaultActive=r.sortId,l.value=y?[y,r.title]:[r.title],c.value.push({title:o.meta.title,path:o.path,defaultOpeneds:t.defaultOpeneds,defaultActive:t.defaultActive,breadcrumb:l.value})}),f=!0,!0;r.children?.length&&v(r.children,r.sortId,r.title)})})(n,e,s),f||F(()=>{const v=k("breadcrumb"),_=v?.findIndex(h=>h===o?.meta?.title);_>-1&&(l.value=v?.slice(0,_+1),_!==v?.length-1&&x("breadcrumb",l.value)),t.defaultOpeneds=k("menuOption")?.defaultOpeneds,t.defaultActive=k("menuOption")?.defaultActive})}};(async function(){const e=await ae.getMenu();t.menu=e,e&&H(e)})();const L=async()=>{await ne.logoutAction()&&d.replace({name:"Login"})},U=()=>{d.push({name:"SystemPassword"})},J=(n,e)=>{if(l.value=[n.title],t.menu,t.defaultOpeneds=[n.sortId],t.defaultActive=e.sortId,e.title&&e.path){let s=!!c.value.find(f=>f.title===e.title);O.value=e.path,s||c.value.push({title:e.title,defaultOpeneds:t.defaultOpeneds,defaultActive:t.defaultActive,breadcrumb:l.value,path:e.path})}e.name?d.push({name:e.name}):e.path&&d.push({path:e.path})};return(n,e)=>{const s=pe,f=fe,v=oe,_=_e,h=me,y=ve,r=be,K=he,Q=ge,q=Oe,Z=Ae("router-view"),$=ye,M=Ee;return m(),g(M,{class:"layout-container"},{default:u(()=>[a(E(Me),{"menu-option":t,onGoMenu:J},null,8,["menu-option"]),a(M,null,{default:u(()=>[a(r,{class:"home-header flex center between pos-r f12 color-black"},{default:u(()=>[a(f,{separator:"/"},{default:u(()=>[(m(!0),S(D,null,V(l.value,i=>(m(),g(s,{key:i},{default:u(()=>[C("span",Te,R(i),1)]),_:2},1024))),128))]),_:1}),C("div",Se,[a(y,null,{dropdown:u(()=>[a(h,null,{default:u(()=>[a(_,{onClick:L},{default:u(()=>[I("\u6CE8\u9500")]),_:1}),a(_,{onClick:U},{default:u(()=>[I("\u4FEE\u6539\u5BC6\u7801")]),_:1})]),_:1})]),default:u(()=>[a(v,{class:"mr10 color-gray3"})]),_:1}),C("span",null,R(E(P)?.username),1)])]),_:1}),c.value?.length?(m(),g(Q,{key:0,modelValue:O.value,"onUpdate:modelValue":e[0]||(e[0]=i=>O.value=i),closable:"",type:"card",class:"demo-tabs",onTabClick:j,onTabRemove:G},{default:u(()=>[(m(!0),S(D,null,V(c.value,i=>(m(),g(K,{key:i.path,label:i.title,name:i.path},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])):ke("",!0),a($,{class:"bg-gray"},{default:u(()=>[a(q,{target:".el-main"}),a(Z,null,{default:u(({Component:i})=>[a(xe,{name:"fade",mode:"out-in"},{default:u(()=>[(m(),g(we,{include:E(b)},[(m(),g(Be(i),{key:E(o).fullPath}))],1032,["include"]))]),_:2},1024)]),_:1})]),_:1})]),_:1})]),_:1})}}});const Je=le(Ve,[["__scopeId","data-v-89413f43"]]);export{Je as default};
