import{_ as ce}from"./index.c622b150.js";/* empty css                  */import{d as ie,r as Q,b as B,a as Z,A as F,B as de,R as _,J as h,Q as c,S as r,aq as w,az as D,Z as v,P as N,a2 as L,a3 as U,_ as P,u as H,N as ve,T as pe,U as fe,a8 as ye}from"./element-plus.dee36745.js";import{A as Fe}from"./page-wrapper.20a0f396.js";import"./mockjs.f3824721.js";/* empty css                */class i{static X=20;static Y=20;static colorType={1:{background:"#FFB7DD"},2:{background:"#FFCCCC"},3:{background:"#FFC8B4"},4:{background:"#FFDDAA"},5:{background:"#FFEE99"},6:{background:"#FFFFBB"},7:{background:"#EEFFBB"},8:{background:"#CCFF99"},9:{background:"#99FF99"},10:{background:"#BBFFEE"},11:{background:"#AAFFEE"},12:{background:"#99FFFF"},13:{background:"#CCEEFF"},14:{background:"#CCDDFF"}};static contentType={1:"\u{1F955}",2:"\u2702\uFE0F",3:"\u{1F966}",4:"\u{1F95B}",5:"\u{1F30A}",6:"\u{1F9E4}",7:"\u{1F9F5}",8:"\u{1F331}",9:"\u{1F528}",10:"\u{1F33D}",11:"\u{1F33E}",12:"\u{1F411}",13:"\u{1FAB5}",14:"\u{1F525}"};x;y;z;key;val;style;content;cover;constructor({x:u,y:k,z:A,key:s}){this.x=u,this.y=k,this.z=A,this.key=s;const o=A*0;this.val=s,this.style={top:k*i.Y+o+"px",left:u*i.X+o+"px",width:i.X*2-2+"px",height:i.Y*2-8+"px"}}setValue(u){this.val=u,this.content=i.contentType[u],Object.assign(this.style,i.colorType[u])}}const he=X=>(pe("data-v-972f4c05"),X=X(),fe(),X),ke={key:0,class:"intro"},me=he(()=>c("br",null,null,-1)),xe={key:1,class:"intro"},ge={key:2,class:"box"},Ce=["onClick"],Ee=["onClick"],_e={class:"pt30 pb10 text-center"},Ae={class:"text-center"},be=ie({__name:"index",setup(X){const u=Q({x:6,y:4,z:8,cardRandom:.2,maxCardTypeNum:11,maxPickNum:3}),k=B(0),A=B(!1),s=B([]),o=B([]),b=B([]),m=B([]),x=Q({pick:!0,rand:!0});let I=null,T=[],g=0,C=0;const K=Z(()=>({width:(g+2)*i.X+"px",height:(C+5)*i.Y+"px"})),M=Z(()=>((g+2)*i.X-7*i.X*2)/2),ee=()=>{if(!x.rand)return;x.rand=!1;const a=s.value.length;s.value?.forEach(e=>{const n=Math.floor(a*Math.random()),t=s.value[n];let l;l=e.style.left,e.style.left=t.style.left,t.style.left=l,l=e.style.top,e.style.top=t.style.top,t.style.top=l,l=e.x,e.x=t.x,t.x=l,l=e.y,e.y=t.y,t.y=l,l=e.z,e.z=t.z,t.z=l}),s.value.sort((e,n)=>e.z-n.z),R()},te=()=>{if(!x.pick)return!1;x.pick=!1,m.value=o.value.slice(0,u.maxPickNum),setTimeout(()=>{m.value.forEach((a,e)=>{a.style.top="70%",a.style.left=M.value+e*i.X*2+"px",T[a.val]--})},0),o.value=o.value.slice(u.maxPickNum),o.value.forEach((a,e)=>{a.style.top="90%",a.style.left=M.value+e*i.X*2+"px"})},le=({x:a,y:e,z:n})=>{g=a*2,C=e*2;const t=new Array(n);for(let l=0;l<n;l++){t[l]=new Array(C);for(let y=0;y<C;y++)t[l][y]=new Array(g).fill(0)}return t},ae=({x:a,y:e,z:n,cardRandom:t})=>{let l=le({x:a,y:e,z:n}),y=[],z=0;for(let d=0;d<n;d++){const j=Math.floor((n-d-1)/3),re=Math.min(Math.floor(g/2)-2,j),$=Math.min(Math.floor(C/2)-2,j);for(let p=$;p<C-1-$;p++)for(let f=re;f<Math.ceil((g-1)/2);f++){let E=!0;if((f>0&&l[d][p][f-1]||p>0&&l[d][p-1][f]||p>0&&f>0&&l[d][p-1][f-1]||p>0&&l[d][p-1][f+1]||d>0&&l[d-1][p][f]||Math.random()>=t)&&(E=!1),E){z++;const q=new i({x:f,y:p,z:d,key:z});l[d][p][f]=q,y.push(q);const S=g-2-f;if(S>f){z++;const J=new i({x:S,y:p,z:d,key:z});l[d][p][S]=J,y.push(J)}}}}y.reverse();for(let d=1;d<=z%3;d++){const V=y.pop();V&&(l[V.z][V.y][V.x]=0)}y.reverse(),s.value=y},Y=()=>{k.value=1,ae(u),o.value=[],b.value=[],m.value=[],x.pick=!0,x.rand=!0,ue({maxCardTypeNum:Number(u.maxCardTypeNum)}),R()},ue=({maxCardTypeNum:a})=>{const e=new Array(a);T=new Array(a+1).fill(0),s.value?.forEach(t=>{const l=Math.ceil(Math.random()*a);e[l]?(e[l].push(t),e[l].length===3&&(e[l].forEach(y=>{y.setValue(l)}),e[l]=null)):e[l]=[t]});let n=2;e.forEach(t=>{t?.forEach(l=>{n++,l.setValue(Math.floor(n/3))})})},R=()=>{const a=new Array(C);for(let e=0;e<=C;e++)a[e]=new Array(g).fill(!1);for(let e=s.value.length-1;e>=0;e--){const n=s.value[e],{x:t,y:l}=n;a[l][t]||a[l][t+1]||a[l+1][t]||a[l+1][t+1]?n.cover=!0:n.cover=!1,a[l][t]=!0,a[l+1][t]=!0,a[l][t+1]=!0,a[l+1][t+1]=!0}},ne=a=>{s.value.push(a);const e=m.value.indexOf(a);m.value=m.value.slice(0,e).concat(m.value.slice(e+1)),G(a)},W=()=>{o.value.some(a=>{T[a.val]===3&&(o.value.forEach(e=>{e.val===a.val&&b.value.push(e)}),setTimeout(()=>{b.value.forEach(e=>{e.style.left=M.value-60+"px"})},300),o.value=o.value.filter(e=>e.val!==a.val),o.value.forEach((e,n)=>{e.style.top="90%",e.style.left=M.value+n*i.X*2+"px"}),T[a.val]=0,s.value.length===0&&(k.value=2,A.value=!0))}),o.value.length>=7&&(k.value=2,A.value=!1)},G=a=>{I&&clearTimeout(I),W(),o.value.push(a);const e=s.value.indexOf(a);s.value=s.value.slice(0,e).concat(s.value.slice(e+1)),R(),T[a.val]++,setTimeout(()=>{a.style.top="90%",a.style.left=M.value+(o.value.length-1)*i.X*2+"px"},0),I=setTimeout(()=>{W()},500)},se=()=>{Y()},oe=()=>{k.value=0},O=()=>{Y()};return(a,e)=>{const n=ve;return F(),de(H(Fe),{"header-title":"\u{1F411}\u4E86\u4E2A\u{1F411}"},{bodyContent:_(()=>[k.value===0?(F(),h("div",ke,[c("div",null,[r(" \u6A2A\u5411\u5361\u7247\u6700\u5927\u5E73\u94FA\u6392\u6570 "),w(c("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>u.x=t),min:"2",max:"10",type:"range"},null,512),[[D,u.x]]),r(" "+v(u.x),1)]),c("div",null,[r(" \u7EB5\u5411\u5361\u7247\u6700\u5927\u5E73\u94FA\u6392\u6570 "),w(c("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>u.y=t),min:"2",max:"10",type:"range"},null,512),[[D,u.y]]),r(" "+v(u.y),1)]),c("div",null,[r(" \u5361\u7247\u6700\u5927\u5806\u53E0\u5C42\u6570 "),w(c("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>u.z=t),min:"2",max:"10",type:"range"},null,512),[[D,u.z]]),r(" "+v(u.z),1)]),c("div",null,[r(" \u5361\u7247\u5BC6\u5EA6 "),w(c("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>u.cardRandom=t),min:"0",max:"1",step:"0.1",type:"range"},null,512),[[D,u.cardRandom]]),r(" "+v(u.cardRandom),1)]),c("div",null,[r(" \u6700\u5927\u5361\u7247\u79CD\u7C7B "),w(c("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>u.maxCardTypeNum=t),min:"3",max:"14",step:"1",type:"range"},null,512),[[D,u.maxCardTypeNum]]),r(" "+v(u.maxCardTypeNum),1)]),c("div",null,[r(" \u53EF\u53D6\u51FA\u5361\u7247\u6570 "),w(c("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>u.maxPickNum=t),min:"0",max:"5",step:"1",type:"range"},null,512),[[D,u.maxPickNum]]),r(" "+v(u.maxPickNum),1)]),me,N(n,{onClick:se},{default:_(()=>[r("\u5F00\u59CB\u6E38\u620F")]),_:1})])):k.value===2?(F(),h("div",xe,[c("h1",null,v(A.value?"You Win\uFF01\u{1F389}":"You Lose!\u{1F622}"),1),N(n,{onClick:O},{default:_(()=>[r("\u518D\u6765\u4E00\u8F6E")]),_:1}),N(n,{onClick:oe},{default:_(()=>[r("\u96BE\u5EA6\u8C03\u8282")]),_:1})])):(F(),h("div",ge,[c("div",{class:"card-wrap",style:P(H(K))},[(F(!0),h(L,null,U(s.value,t=>(F(),h("div",{key:t.key,class:ye([{"item-cover":t.cover},"card-item"]),style:P(t.style),onClick:l=>G(t)},v(t.content),15,Ce))),128)),(F(!0),h(L,null,U(o.value,t=>(F(),h("div",{key:t.key,class:"card-item",style:P(t.style)},v(t.content),5))),128)),(F(!0),h(L,null,U(b.value,t=>(F(),h("div",{key:t.key,class:"card-item clear-item",style:P(t.style)},v(t.content),5))),128)),(F(!0),h(L,null,U(m.value,t=>(F(),h("div",{key:t.key,class:"card-item",style:P(t.style),onClick:l=>ne(t)},v(t.content),13,Ee))),128))],4),c("div",_e," \u5269\u4F59\u7A7A\u4F4D:"+v(7-o.value.length)+"/7\uFF1B\u5DF2\u6D88\u9664:"+v(b.value.length)+"/"+v(s.value.length+o.value.length+m.value.length+b.value.length),1),c("div",Ae,[r(" \u9053\u5177\uFF1A "),N(n,{disabled:!x.pick,onClick:te},{default:_(()=>[r("\u53D6\u51FA"+v(u.maxPickNum)+"\u4E2A\u5361\u7247",1)]),_:1},8,["disabled"]),N(n,{disabled:!x.rand,onClick:ee},{default:_(()=>[r("\u968F\u673A")]),_:1},8,["disabled"]),N(n,{onClick:O},{default:_(()=>[r("\u518D\u6765\u4E00\u8F6E")]),_:1})])]))]),_:1})}}});const ze=ce(be,[["__scopeId","data-v-972f4c05"]]);export{ze as default};
