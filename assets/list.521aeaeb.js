import{a as J,b as O}from"./index.c622b150.js";import{J as M}from"./index.esm.8e8b951c.js";import{A as W}from"./table-settings.3031e338.js";/* empty css                 *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                        *//* empty css                    */import"./el-tooltip.89296c46.js";/* empty css                  */import{A as q}from"./page-wrapper.20a0f396.js";import{d as K,b as n,a as Q,ao as Z,aV as G,ap as H,aW as X,A as B,B as y,R as l,Q as S,P as t,S as f,u as F,aq as Y,Z as ee,E as te,N as ae,L as oe,ar as le}from"./element-plus.dee36745.js";import"./mockjs.f3824721.js";/* empty css                         *//* empty css                */const ue={class:"flex center"},ne={class:"pl10"},Se=K({__name:"list",setup(re){const E=J(),p=n([]),_=n("default"),c=n(""),h=n(1),r=n(10),C=n(0),m=n(!0),w=n(),d=n([]);let i=1;const g=async(e,a)=>{m.value=!0;const{total:s,content:v}=await O.getUserList({pageNum:e,pageSize:a});m.value=!1,C.value=s,p.value=v};g(i,r.value);const b=Q(()=>p.value?.filter(e=>!c.value||e.userName.toLowerCase().includes(c.value.toLowerCase()))??[]),z=()=>{E.push({name:"SystemUserInsert"})},x=e=>{d.value=e},A=()=>{p.value.length=0,c.value="",h.value=1,i=1,r.value=10,C.value=0,m.value=!0,d.value.length=0},N=()=>{A(),g(i,r.value)},D=e=>{_.value===e||!e||(_.value=e)},T=()=>{if(d.value?.length){const e={id:"\u5E8F\u53F7",userName:"\u7528\u6237\u540D",email:"\u90AE\u7BB1",role:"\u89D2\u8272",createTime:"\u521B\u5EFA\u65F6\u95F4"},a=["id","userName","role","email","createTime"],s={role:"value"};new M({data:d.value,orderedKey:a,keyMap:e,scope:s,onStart:()=>{console.log("\u5F00\u59CB")},onSuccess:()=>{console.log("\u6210\u529F")},onError:u=>{console.log(u)}}).generate()}else te({message:"\u8BF7\u52FE\u9009\u9700\u8981\u5BFC\u51FA\u7684\u6570\u636E\uFF01",type:"warning"})},k=e=>{!e||E.push({name:"SystemUserEdit",params:{data:JSON.stringify(e)}})},P=e=>(p.value=b.value?.filter(a=>a.id!==e),!0),U=e=>{i=1,r.value=e,g(i,r.value),console.log(`${e} items per page`)},V=e=>{i=e,g(i,r.value),console.log(`current page: ${e}`)};return(e,a)=>{const s=ae,v=oe,u=Z,L=G,R=H,$=X,j=le;return B(),y(F(q),{"header-title":"\u7528\u6237\u7BA1\u7406"},{extra:l(()=>[S("div",ue,[t(s,{type:"primary",onClick:z},{default:l(()=>[f("\u65B0\u589E\u7528\u6237")]),_:1}),t(s,{type:"primary",onClick:T},{default:l(()=>[f("\u5BFC\u51FAexcel")]),_:1}),t(v,{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=o=>c.value=o),class:"ml10",placeholder:"User to search"},null,8,["modelValue"]),t(F(W),{onOnRefresh:N,onOnSize:D})])]),bodyContent:l(()=>[Y((B(),y(R,{ref_key:"multipleTableRef",ref:w,data:F(b),border:"",size:_.value,"highlight-current-row":"",style:{width:"100%"},onSelectionChange:x},{default:l(()=>[t(u,{type:"selection",width:"55"}),t(u,{prop:"id",label:"\u5E8F\u53F7",width:"55"}),t(u,{prop:"userName",label:"\u7528\u6237\u540D",width:"180"}),t(u,{prop:"email",sortable:"",label:"\u90AE\u7BB1"}),t(u,{prop:"createTime",sortable:"",label:"\u521B\u5EFA\u65F6\u95F4"}),t(u,{prop:"role",label:"\u89D2\u8272"},{default:l(o=>[S("span",ne,ee(o.row.role.value),1)]),_:1}),t(u,{label:"\u64CD\u4F5C"},{default:l(o=>[t(s,{size:"small",onClick:I=>k(o.row)},{default:l(()=>[f("\u7F16\u8F91")]),_:2},1032,["onClick"]),t(L,{title:"\u786E\u5B9A\u5220\u9664\u8BE5\u7528\u6237\uFF1F","icon-color":"red",onConfirm:I=>P(o.row.id)},{reference:l(()=>[t(s,{size:"small",type:"danger"},{default:l(()=>[f("\u5220\u9664")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data","size"])),[[j,m.value]]),t($,{currentPage:h.value,"onUpdate:currentPage":a[1]||(a[1]=o=>h.value=o),"page-size":r.value,"onUpdate:page-size":a[2]||(a[2]=o=>r.value=o),class:"text-right mt20 mb20",background:"","page-sizes":[10,20,30,40,50,100],layout:"total, sizes, prev, pager, next, jumper",total:C.value,onSizeChange:U,onCurrentChange:V},null,8,["currentPage","page-size","total"])]),_:1})}}});export{Se as default};
