import{a as W,b as q}from"./index.311e097d.js";import{J as K}from"./index.esm.8e8b951c.js";import{A as Q}from"./table-settings.856f3c4e.js";/* empty css                 *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                        *//* empty css                    */import"./el-tooltip.89296c46.js";/* empty css                  *//* empty css                  */import{A as Z}from"./page-wrapper.85f5bc98.js";import{d as G,b as r,a as H,ao as X,aU as Y,aV as ee,ap as te,aW as ae,A as B,B as k,R as l,Q as C,P as t,S as m,u as z,aq as le,Z as y,E as oe,N as ue,L as ne,ar as re}from"./element-plus.dee36745.js";import"./mockjs.f3824721.js";/* empty css                         *//* empty css                */const se={class:"flex center"},ie={class:"pl10"},pe={class:"pl10"},ce={class:"pl10"},Ae=G({__name:"list",setup(de){const F=W();let g=r([]),E=r("default"),c=r(""),b=r(1),i=1,s=r(10),w=r(0),v=r(!0),x=r(),_=r([]);const f=async(e,o)=>{v.value=!0;const{total:u,content:d}=await q.getRoleList({pageNum:e,pageSize:o});v.value=!1,w.value=u,g.value=d};f(i,s.value);const S=H(()=>g.value?.filter(e=>!c.value||e.role.key.toLowerCase().includes(c.value.toLowerCase())||e.role.value.toLowerCase().includes(c.value.toLowerCase()))),D=e=>{i=1,s.value=e,f(i,s.value),console.log(`${e} items per page`)},A=e=>{i=e,f(i,s.value),console.log(`current page: ${e}`)},R=e=>{_.value=e},V=()=>{g.value.length=0,c.value="",b.value=1,i=1,s.value=10,w.value=0,v.value=!0,_.value.length=0},T=()=>{V(),f(i,s.value)},N=e=>{E.value===e||!e||(E.value=e)},L=()=>{if(_.value?.length){const e={id:"\u5E8F\u53F7",status:"\u72B6\u6001",role:"\u89D2\u8272",createTime:"\u521B\u5EFA\u65F6\u95F4",remark:"\u5907\u6CE8"},o=["id","role","status","createTime","remark"],u={role:"value"},d=_.value.map(p=>(p.status=p.status?"\u542F\u7528":"\u7981\u7528",p));new K({data:d,orderedKey:o,keyMap:e,scope:u,onStart:()=>{console.log("\u5F00\u59CB")},onSuccess:()=>{console.log("\u6210\u529F")},onError:p=>{console.log(p)}}).generate()}else oe({message:"\u8BF7\u52FE\u9009\u9700\u8981\u5BFC\u51FA\u7684\u6570\u636E\uFF01",type:"warning"})},P=()=>{F.push({name:"SystemRoleInsert"})},U=e=>{!e||F.push({name:"SystemRoleEdit",params:{data:JSON.stringify(e)}})},$=e=>{!e||F.push({name:"SystemAuth",params:{role:JSON.stringify(e.role)}})},J=e=>(g.value=S.value?.filter(o=>o.id!==e),!0);return(e,o)=>{const u=ue,d=ne,n=X,p=Y,O=ee,j=te,I=ae,M=re;return B(),k(z(Z),{"header-title":"\u89D2\u8272\u7BA1\u7406"},{extra:l(()=>[C("div",se,[t(u,{type:"primary",onClick:P},{default:l(()=>[m("\u65B0\u589E\u89D2\u8272")]),_:1}),t(u,{type:"primary",onClick:L},{default:l(()=>[m("\u5BFC\u51FAexcel")]),_:1}),t(d,{modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=a=>c.value=a),class:"ml10",placeholder:"Role to search"},null,8,["modelValue"]),t(z(Q),{onOnRefresh:T,onOnSize:N})])]),bodyContent:l(()=>[le((B(),k(j,{ref_key:"multipleTableRef",ref:x,data:S.value,border:"",size:E.value,"highlight-current-row":"",style:{width:"100%"},onSelectionChange:R},{default:l(()=>[t(n,{type:"selection",width:"55"}),t(n,{prop:"id",label:"\u5E8F\u53F7",width:"80",sortable:""}),t(n,{prop:"role",label:"\u89D2\u8272\u540D\u79F0"},{default:l(a=>[C("span",ie,y(a.row.role.value),1)]),_:1}),t(n,{prop:"role",label:"\u89D2\u8272\u503C"},{default:l(a=>[C("span",pe,y(a.row.role.key),1)]),_:1}),t(n,{prop:"status",label:"\u72B6\u6001"},{default:l(a=>[t(p,{modelValue:a.row.status,"onUpdate:modelValue":h=>a.row.status=h,disabled:""},null,8,["modelValue","onUpdate:modelValue"]),C("span",ce,y(a.row.status?"\u542F\u7528":"\u7981\u7528"),1)]),_:1}),t(n,{prop:"createTime",sortable:"",label:"\u521B\u5EFA\u65F6\u95F4"}),t(n,{prop:"remark",label:"\u5907\u6CE8"}),t(n,{label:"\u64CD\u4F5C",width:"240"},{default:l(a=>[t(u,{size:"small",onClick:h=>U(a.row)},{default:l(()=>[m("\u7F16\u8F91")]),_:2},1032,["onClick"]),t(u,{size:"small",type:"primary",onClick:h=>$(a.row)},{default:l(()=>[m("\u6743\u9650\u914D\u7F6E")]),_:2},1032,["onClick"]),t(O,{title:"\u786E\u5B9A\u5220\u9664\u8BE5\u89D2\u8272\uFF1F","icon-color":"red",onConfirm:h=>J(a.row.id)},{reference:l(()=>[t(u,{size:"small",type:"danger"},{default:l(()=>[m("\u5220\u9664")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data","size"])),[[M,v.value]]),t(I,{currentPage:b.value,"onUpdate:currentPage":o[1]||(o[1]=a=>b.value=a),"page-size":s.value,"onUpdate:page-size":o[2]||(o[2]=a=>s.value=a),class:"text-right mt20 mb20",background:"","page-sizes":[10,20,30,40,50,100],layout:"total, sizes, prev, pager, next, jumper",total:w.value,onSizeChange:D,onCurrentChange:A},null,8,["currentPage","page-size","total"])]),_:1})}}});export{Ae as default};
