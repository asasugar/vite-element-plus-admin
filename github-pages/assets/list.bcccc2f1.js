import{a as W,b as q}from"./index.de691d82.js";import{J as K}from"./index.esm.8e8b951c.js";import{A as Q}from"./table-settings.08e8b7b2.js";/* empty css                 *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                        *//* empty css                    */import"./el-tooltip.89296c46.js";/* empty css                  *//* empty css                  */import{A as Z}from"./page-wrapper.a254fa4d.js";import{d as G,b as s,a as H,ao as X,aU as Y,aV as ee,ap as te,aW as ae,A as k,B as z,R as o,Q as C,P as t,S as m,u as y,aq as oe,Z as S,E as le,N as ue,L as ne,ar as se}from"./element-plus.dee36745.js";import"./mockjs.f3824721.js";/* empty css                         *//* empty css                */const re={class:"flex center"},ie={class:"pl10"},ce={class:"pl10"},pe={class:"pl10"},Ae=G({__name:"list",setup(de){const F=W(),g=s([]),E=s("default"),p=s(""),b=s(1),r=s(10),w=s(0),_=s(!0),x=s(),v=s([]);let i=1;const f=async(e,l)=>{_.value=!0;const{total:u,content:d}=await q.getRoleList({pageNum:e,pageSize:l});_.value=!1,w.value=u,g.value=d};f(i,r.value);const B=H(()=>g.value?.filter(e=>!p.value||e.role.key.toLowerCase().includes(p.value.toLowerCase())||e.role.value.toLowerCase().includes(p.value.toLowerCase()))),D=e=>{i=1,r.value=e,f(i,r.value),console.log(`${e} items per page`)},A=e=>{i=e,f(i,r.value),console.log(`current page: ${e}`)},R=e=>{v.value=e},V=()=>{g.value.length=0,p.value="",b.value=1,i=1,r.value=10,w.value=0,_.value=!0,v.value.length=0},T=()=>{V(),f(i,r.value)},N=e=>{E.value===e||!e||(E.value=e)},L=()=>{if(v.value?.length){const e={id:"\u5E8F\u53F7",status:"\u72B6\u6001",role:"\u89D2\u8272",createTime:"\u521B\u5EFA\u65F6\u95F4",remark:"\u5907\u6CE8"},l=["id","role","status","createTime","remark"],u={role:"value"},d=v.value.map(c=>(c.status=c.status?"\u542F\u7528":"\u7981\u7528",c));new K({data:d,orderedKey:l,keyMap:e,scope:u,onStart:()=>{console.log("\u5F00\u59CB")},onSuccess:()=>{console.log("\u6210\u529F")},onError:c=>{console.log(c)}}).generate()}else le({message:"\u8BF7\u52FE\u9009\u9700\u8981\u5BFC\u51FA\u7684\u6570\u636E\uFF01",type:"warning"})},P=()=>{F.push({name:"SystemRoleInsert"})},U=e=>{!e||F.push({name:"SystemRoleEdit",params:{data:JSON.stringify(e)}})},$=e=>{!e||F.push({name:"SystemAuth",params:{role:JSON.stringify(e.role)}})},J=e=>(g.value=B.value?.filter(l=>l.id!==e),!0);return(e,l)=>{const u=ue,d=ne,n=X,c=Y,O=ee,j=te,I=ae,M=se;return k(),z(y(Z),{"header-title":"\u89D2\u8272\u7BA1\u7406"},{extra:o(()=>[C("div",re,[t(u,{type:"primary",onClick:P},{default:o(()=>[m("\u65B0\u589E\u89D2\u8272")]),_:1}),t(u,{type:"primary",onClick:L},{default:o(()=>[m("\u5BFC\u51FAexcel")]),_:1}),t(d,{modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=a=>p.value=a),class:"ml10",placeholder:"Role to search"},null,8,["modelValue"]),t(y(Q),{onOnRefresh:T,onOnSize:N})])]),bodyContent:o(()=>[oe((k(),z(j,{ref_key:"multipleTableRef",ref:x,data:y(B),border:"",size:E.value,"highlight-current-row":"",style:{width:"100%"},onSelectionChange:R},{default:o(()=>[t(n,{type:"selection",width:"55"}),t(n,{prop:"id",label:"\u5E8F\u53F7",width:"80",sortable:""}),t(n,{prop:"role",label:"\u89D2\u8272\u540D\u79F0"},{default:o(a=>[C("span",ie,S(a.row.role.value),1)]),_:1}),t(n,{prop:"role",label:"\u89D2\u8272\u503C"},{default:o(a=>[C("span",ce,S(a.row.role.key),1)]),_:1}),t(n,{prop:"status",label:"\u72B6\u6001"},{default:o(a=>[t(c,{modelValue:a.row.status,"onUpdate:modelValue":h=>a.row.status=h,disabled:""},null,8,["modelValue","onUpdate:modelValue"]),C("span",pe,S(a.row.status?"\u542F\u7528":"\u7981\u7528"),1)]),_:1}),t(n,{prop:"createTime",sortable:"",label:"\u521B\u5EFA\u65F6\u95F4"}),t(n,{prop:"remark",label:"\u5907\u6CE8"}),t(n,{label:"\u64CD\u4F5C",width:"240"},{default:o(a=>[t(u,{size:"small",onClick:h=>U(a.row)},{default:o(()=>[m("\u7F16\u8F91")]),_:2},1032,["onClick"]),t(u,{size:"small",type:"primary",onClick:h=>$(a.row)},{default:o(()=>[m("\u6743\u9650\u914D\u7F6E")]),_:2},1032,["onClick"]),t(O,{title:"\u786E\u5B9A\u5220\u9664\u8BE5\u89D2\u8272\uFF1F","icon-color":"red",onConfirm:h=>J(a.row.id)},{reference:o(()=>[t(u,{size:"small",type:"danger"},{default:o(()=>[m("\u5220\u9664")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data","size"])),[[M,_.value]]),t(I,{currentPage:b.value,"onUpdate:currentPage":l[1]||(l[1]=a=>b.value=a),"page-size":r.value,"onUpdate:page-size":l[2]||(l[2]=a=>r.value=a),class:"text-right mt20 mb20",background:"","page-sizes":[10,20,30,40,50,100],layout:"total, sizes, prev, pager, next, jumper",total:w.value,onSizeChange:D,onCurrentChange:A},null,8,["currentPage","page-size","total"])]),_:1})}}});export{Ae as default};
