import{_ as re}from"./index.311e097d.js";/* empty css                  */import{d as ce,b as E,a as Q,A as F,B as ie,R as A,J as h,Q as c,S as r,aq as w,az as D,Z as v,P as N,a2 as L,a3 as U,_ as P,u as Z,N as de,T as ve,U as pe,a8 as fe}from"./element-plus.dee36745.js";import{A as ye}from"./page-wrapper.85f5bc98.js";import"./mockjs.f3824721.js";/* empty css                */class i{static X=20;static Y=20;static colorType={1:{background:"#FFB7DD"},2:{background:"#FFCCCC"},3:{background:"#FFC8B4"},4:{background:"#FFDDAA"},5:{background:"#FFEE99"},6:{background:"#FFFFBB"},7:{background:"#EEFFBB"},8:{background:"#CCFF99"},9:{background:"#99FF99"},10:{background:"#BBFFEE"},11:{background:"#AAFFEE"},12:{background:"#99FFFF"},13:{background:"#CCEEFF"},14:{background:"#CCDDFF"}};static contentType={1:"\u{1F955}",2:"\u2702\uFE0F",3:"\u{1F966}",4:"\u{1F95B}",5:"\u{1F30A}",6:"\u{1F9E4}",7:"\u{1F9F5}",8:"\u{1F331}",9:"\u{1F528}",10:"\u{1F33D}",11:"\u{1F33E}",12:"\u{1F411}",13:"\u{1FAB5}",14:"\u{1F525}"};x;y;z;key;val;style;content;cover;constructor({x:u,y:k,z:b,key:s}){this.x=u,this.y=k,this.z=b,this.key=s;const o=b*0;this.val=s,this.style={top:k*i.Y+o+"px",left:u*i.X+o+"px",width:i.X*2-2+"px",height:i.Y*2-8+"px"}}setValue(u){this.val=u,this.content=i.contentType[u],Object.assign(this.style,i.colorType[u])}}const Fe=X=>(ve("data-v-d86d77f2"),X=X(),pe(),X),he={key:0,class:"intro"},ke=Fe(()=>c("br",null,null,-1)),me={key:1,class:"intro"},xe={key:2,class:"box"},ge=["onClick"],Ce=["onClick"],Ee={class:"pt30 pb10 text-center"},_e={class:"text-center"},Ae=ce({__name:"index",setup(X){let u=E({x:6,y:4,z:8,cardRandom:.2,maxCardTypeNum:11,maxPickNum:3}),k=E(0),b=E(!1),s=E([]),o=E([]),B=E([]),m=E([]);const x=E({pick:!0,rand:!0});let I=null,T=[],g=0,C=0;const H=Q(()=>({width:(g+2)*i.X+"px",height:(C+5)*i.Y+"px"})),M=Q(()=>((g+2)*i.X-7*i.X*2)/2),K=()=>{if(!x.value.rand)return;x.value.rand=!1;const t=s.value.length;s.value?.forEach(e=>{const n=Math.floor(t*Math.random()),l=s.value[n];let a;a=e.style.left,e.style.left=l.style.left,l.style.left=a,a=e.style.top,e.style.top=l.style.top,l.style.top=a,a=e.x,e.x=l.x,l.x=a,a=e.y,e.y=l.y,l.y=a,a=e.z,e.z=l.z,l.z=a}),s.value.sort((e,n)=>e.z-n.z),R()},ee=()=>{if(!x.value.pick)return!1;x.value.pick=!1,m.value=o.value.slice(0,u.value.maxPickNum),setTimeout(()=>{m.value.forEach((t,e)=>{t.style.top="70%",t.style.left=M.value+e*i.X*2+"px",T[t.val]--})},0),o.value=o.value.slice(u.value.maxPickNum),o.value.forEach((t,e)=>{t.style.top="90%",t.style.left=M.value+e*i.X*2+"px"})},le=({x:t,y:e,z:n})=>{g=t*2,C=e*2;const l=new Array(n);for(let a=0;a<n;a++){l[a]=new Array(C);for(let y=0;y<C;y++)l[a][y]=new Array(g).fill(0)}return l},ae=({x:t,y:e,z:n,cardRandom:l})=>{let a=le({x:t,y:e,z:n}),y=[],z=0;for(let d=0;d<n;d++){const j=Math.floor((n-d-1)/3),oe=Math.min(Math.floor(g/2)-2,j),$=Math.min(Math.floor(C/2)-2,j);for(let p=$;p<C-1-$;p++)for(let f=oe;f<Math.ceil((g-1)/2);f++){let _=!0;if((f>0&&a[d][p][f-1]||p>0&&a[d][p-1][f]||p>0&&f>0&&a[d][p-1][f-1]||p>0&&a[d][p-1][f+1]||d>0&&a[d-1][p][f]||Math.random()>=l)&&(_=!1),_){z++;const q=new i({x:f,y:p,z:d,key:z});a[d][p][f]=q,y.push(q);const S=g-2-f;if(S>f){z++;const J=new i({x:S,y:p,z:d,key:z});a[d][p][S]=J,y.push(J)}}}}y.reverse();for(let d=1;d<=z%3;d++){const V=y.pop();V&&(a[V.z][V.y][V.x]=0)}y.reverse(),s.value=y},Y=()=>{k.value=1,ae(u.value),o.value=[],B.value=[],m.value=[],x.value.pick=!0,x.value.rand=!0,te({maxCardTypeNum:Number(u.value.maxCardTypeNum)}),R()},te=({maxCardTypeNum:t})=>{const e=new Array(t);T=new Array(t+1).fill(0),s.value.forEach(l=>{const a=Math.ceil(Math.random()*t);e[a]?(e[a].push(l),e[a].length===3&&(e[a].forEach(y=>{y.setValue(a)}),e[a]=null)):e[a]=[l]});let n=2;e.forEach(l=>{l?.forEach(a=>{n++,a.setValue(Math.floor(n/3))})})},R=()=>{const t=new Array(C);for(let e=0;e<=C;e++)t[e]=new Array(g).fill(!1);for(let e=s.value.length-1;e>=0;e--){const n=s.value[e],{x:l,y:a}=n;t[a][l]||t[a][l+1]||t[a+1][l]||t[a+1][l+1]?n.cover=!0:n.cover=!1,t[a][l]=!0,t[a+1][l]=!0,t[a][l+1]=!0,t[a+1][l+1]=!0}},ue=t=>{s.value.push(t);const e=m.value.indexOf(t);m.value=m.value.slice(0,e).concat(m.value.slice(e+1)),G(t)},W=()=>{o.value.some(t=>{T[t.val]===3&&(o.value.forEach(e=>{e.val===t.val&&B.value.push(e)}),setTimeout(()=>{B.value.forEach(e=>{e.style.left=M.value-60+"px"})},300),o.value=o.value.filter(e=>e.val!==t.val),o.value.forEach((e,n)=>{e.style.top="90%",e.style.left=M.value+n*i.X*2+"px"}),T[t.val]=0,s.value.length===0&&(k.value=2,b.value=!0))}),o.value.length>=7&&(k.value=2,b.value=!1)},G=t=>{I&&clearTimeout(I),W(),o.value.push(t);const e=s.value.indexOf(t);s.value=s.value.slice(0,e).concat(s.value.slice(e+1)),R(),T[t.val]++,setTimeout(()=>{t.style.top="90%",t.style.left=M.value+(o.value.length-1)*i.X*2+"px"},0),I=setTimeout(()=>{W()},500)},ne=()=>{Y()},se=()=>{k.value=0},O=()=>{Y()};return(t,e)=>{const n=de;return F(),ie(Z(ye),{"header-title":"\u{1F411}\u4E86\u4E2A\u{1F411}"},{bodyContent:A(()=>[k.value===0?(F(),h("div",he,[c("div",null,[r(" \u6A2A\u5411\u5361\u7247\u6700\u5927\u5E73\u94FA\u6392\u6570 "),w(c("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>u.value.x=l),min:"2",max:"10",type:"range"},null,512),[[D,u.value.x]]),r(" "+v(u.value.x),1)]),c("div",null,[r(" \u7EB5\u5411\u5361\u7247\u6700\u5927\u5E73\u94FA\u6392\u6570 "),w(c("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>u.value.y=l),min:"2",max:"10",type:"range"},null,512),[[D,u.value.y]]),r(" "+v(u.value.y),1)]),c("div",null,[r(" \u5361\u7247\u6700\u5927\u5806\u53E0\u5C42\u6570 "),w(c("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>u.value.z=l),min:"2",max:"10",type:"range"},null,512),[[D,u.value.z]]),r(" "+v(u.value.z),1)]),c("div",null,[r(" \u5361\u7247\u5BC6\u5EA6 "),w(c("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>u.value.cardRandom=l),min:"0",max:"1",step:"0.1",type:"range"},null,512),[[D,u.value.cardRandom]]),r(" "+v(u.value.cardRandom),1)]),c("div",null,[r(" \u6700\u5927\u5361\u7247\u79CD\u7C7B "),w(c("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>u.value.maxCardTypeNum=l),min:"3",max:"14",step:"1",type:"range"},null,512),[[D,u.value.maxCardTypeNum]]),r(" "+v(u.value.maxCardTypeNum),1)]),c("div",null,[r(" \u53EF\u53D6\u51FA\u5361\u7247\u6570 "),w(c("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>u.value.maxPickNum=l),min:"0",max:"5",step:"1",type:"range"},null,512),[[D,u.value.maxPickNum]]),r(" "+v(u.value.maxPickNum),1)]),ke,N(n,{onClick:ne},{default:A(()=>[r("\u5F00\u59CB\u6E38\u620F")]),_:1})])):k.value===2?(F(),h("div",me,[c("h1",null,v(b.value?"You Win\uFF01\u{1F389}":"You Lose!\u{1F622}"),1),N(n,{onClick:O},{default:A(()=>[r("\u518D\u6765\u4E00\u8F6E")]),_:1}),N(n,{onClick:se},{default:A(()=>[r("\u96BE\u5EA6\u8C03\u8282")]),_:1})])):(F(),h("div",xe,[c("div",{class:"card-wrap",style:P(Z(H))},[(F(!0),h(L,null,U(s.value,l=>(F(),h("div",{key:l.key,class:fe([{"item-cover":l.cover},"card-item"]),style:P(l.style),onClick:a=>G(l)},v(l.content),15,ge))),128)),(F(!0),h(L,null,U(o.value,l=>(F(),h("div",{key:l.key,class:"card-item",style:P(l.style)},v(l.content),5))),128)),(F(!0),h(L,null,U(B.value,l=>(F(),h("div",{key:l.key,class:"card-item clear-item",style:P(l.style)},v(l.content),5))),128)),(F(!0),h(L,null,U(m.value,l=>(F(),h("div",{key:l.key,class:"card-item",style:P(l.style),onClick:a=>ue(l)},v(l.content),13,Ce))),128))],4),c("div",Ee," \u5269\u4F59\u7A7A\u4F4D:"+v(7-o.value.length)+"/7\uFF1B\u5DF2\u6D88\u9664:"+v(B.value.length)+"/"+v(s.value.length+o.value.length+m.value.length+B.value.length),1),c("div",_e,[r(" \u9053\u5177\uFF1A "),N(n,{disabled:!x.value.pick,onClick:ee},{default:A(()=>[r("\u53D6\u51FA"+v(u.value.maxPickNum)+"\u4E2A\u5361\u7247",1)]),_:1},8,["disabled"]),N(n,{disabled:!x.value.rand,onClick:K},{default:A(()=>[r("\u968F\u673A")]),_:1},8,["disabled"]),N(n,{onClick:O},{default:A(()=>[r("\u518D\u6765\u4E00\u8F6E")]),_:1})])]))]),_:1})}}});const Me=re(Ae,[["__scopeId","data-v-d86d77f2"]]);export{Me as default};
